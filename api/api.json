{
    "name": "Quality",
    "description": "Application to track perfect day and quality at gilt",
    "base_url": "http://localhost:9000",

    "models": {

        "incident": {
            "description": "A bug or error that affected public or internal users in a negative way",
            "fields": [
                { "name": "id", "type": "long", "description": "Internal unique identifier for this incident." },
                { "name": "summary", "type": "string", "description": "Summary of the incident." },
                { "name": "description", "type": "string", "description": "Full description of the incident", "required": false },
                { "name": "team_key", "type": "string", "description": "Team responsible for resolution of this incident. Must be in lower case." },
                { "name": "severity", "type": "string", "example": "low or high" },
		{ "name": "tags", "type": "[string]", "required": false, "description": "Optional list of tags to apply to this incident" }
            ]
        },

        "report": {
            "description": "Details for how an incident will be resolved",
            "fields": [
                { "name": "id", "type": "long", "description": "Internal unique identifier for this incident." },
                { "name": "incident", "type": "incident" },
                { "name": "body", "type": "string", "description": "Full description of the incident" }
            ]
        },

        "grade": {
            "description": "Grade given to a report",
            "fields": [
                { "name": "id", "type": "long", "description": "Internal unique identifier for this incident." },
                { "name": "report", "type": "report" },
                { "name": "value", "type": "string", "example": "pass or fail" }
            ]
        },

        "error": {
            "fields": [
                { "name": "code", "type": "string", "description": "Machine readable code for this specific error message" },
                { "name": "message", "type": "string", "description": "Description of the error" }
            ]
        }

    },

    "resources": [
        {
            "model": "incident",
            "operations": [
                {
                    "method": "GET",
                    "description": "Search all incidents. Results are always paginated.",
                    "parameters": [
                        { "name": "id", "type": "long", "description": "Find incident with this id. Exact match", "required": false },
                        { "name": "team_key", "type": "string", "description": "Find incidents for which this team is responsible. Exact match", "required": false },
                        { "name": "limit", "type": "integer", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
                        { "name": "offset", "type": "integer", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
                        "200": { "type": "[incident]" }
                    }
                },

                {
                    "method": "GET",
                    "description": "Returns information about the incident with this specific id.",
                    "path": "/:id",
                    "responses": {
                        "200": { "type": "incident" }
                    }
                },

                {
                    "method": "POST",
                    "description": "Create a new incident.",
                    "parameters": [
			{ "name": "summary", "type": "string", "description": "Summary of the incident." },
			{ "name": "description", "type": "string", "description": "Full description of the incident" },
			{ "name": "team_key", "type": "string", "description": "Team responsible for resolution of this incident" },
			{ "name": "severity", "type": "string", "example": "low or high" },
			{ "name": "tags", "type": "[string]", "required": false, "description": "Optional list of tags to apply to this incident" }
		    ],
                    "responses": {
                        "201": { "type": "incident" },
                        "409": { "type": "[error]" }
                    }
                },

		{
		    "method": "DELETE",
                    "path": "/:id"
		}

            ]
        },

	{
	    "model": "report",
	    "operations": [
		{
		    "method": "GET",
                    "description": "Search all reports. Results are always paginated.",
                    "parameters": [
                        { "name": "id", "type": "long", "description": "Find report with this id. Exact match", "required": false },
                        { "name": "incident_id", "type": "long", "description": "Find report for this incident_id", "required": false },
                        { "name": "limit", "type": "integer", "default": 25, "description": "The number of records to return", "minimum": 0, "maximum": 100 },
                        { "name": "offset", "type": "integer", "default": 0, "description": "Used to paginate. First page of results is 0.", "minimum": 0 }
                    ],
                    "responses": {
                        "200": { "type": "[report]" }
                    }
                }
	    ]
	}

    ]
}
