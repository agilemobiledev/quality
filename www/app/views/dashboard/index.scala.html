@(teams: lib.PaginatedCollection[quality.models.Team],
  events: Seq[quality.models.Event]
)(implicit flash: Flash)

@main(title = "Gilt Quality", section = Some("dashboard")) {

  <div class="pull-right">
    <span class="glyphicon glyphicon-plus"></span> <a href="@routes.Incidents.create()">Create Incident</a>
    <span class="glyphicon glyphicon-plus"></span> <a href="@routes.Teams.create()">Add team</a>
  </div>

  <h2>Latest Events</h2>
  <table class="table table-hover table-condensed">
    <tbody>
      @events.map { event =>
        <tr>
          <td>@event.timestamp</td>
          <td>@event.action</td>
          @{event.model match {
            case quality.models.Event.Model.Incident => Html(s"<td><a href='${event.url.getOrElse("")}'>Incident #${event.data.modelId}: ${event.data.summary}</a></td>")
            case quality.models.Event.Model.Plan => Html(s"<td><a href='${event.url.getOrElse("")}'>${event.data.summary}</a></td>")
            case quality.models.Event.Model.Rating => Html(s"<td><a href='${event.url.getOrElse("")}'>${event.data.summary}</a></td>")
            case quality.models.Event.Model.UNDEFINED(name) => Html(s"<td>$name</td>")
          }}
       </tr>
     }
    </tbody>
  </table>

  <h2>Teams</h2>
  <table class="table table-hover table-condensed">
    <tbody>
      @teams.items.map { team =>
       <tr>
         <td><a href="@routes.Teams.show(team.key)">@team.key</a></td>
         <td>
           @Html(lib.GradeImage(lib.GradeImage.Good).imageTag())
           @Html(lib.GradeImage(lib.GradeImage.Good).imageTag())
           @Html(lib.GradeImage(lib.GradeImage.Bad).imageTag())
           @Html(lib.GradeImage(lib.GradeImage.Good).imageTag())
           @Html(lib.GradeImage(lib.GradeImage.Good).imageTag())
         </td>
       </tr>
     }
    </tbody>
  </table>

  @if(teams.hasPrevious || teams.hasNext) {
    <ul class="pager">
      @if(teams.hasPrevious) {
        <li><a href="@routes.Dashboard.index(teams.page - 1)">Previous</a></li>
      }
      @if(teams.hasNext) {
        <li><a href="@routes.Dashboard.index(teams.page + 1)">Next</a></li>
      }
    </ul>
  }

}
